<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Factorial Calculator</title>
        <style>
            body {
                font-family: Arial, sans-serif;
                margin: 20px;
            }
            form {
                max-width: 300px;
            }
            input {
                margin: 10px 0;
                padding: 8px;
                width: 100%;
            }
            button {
                padding: 10px;
                background-color: #4caf50;
                color: white;
                border: none;
                cursor: pointer;
            }
            button:hover {
                background-color: #45a049;
            }
        </style>
    </head>
    <body>
        <h1>Factorial Calculator</h1>
        <form id="factorialForm">
            <label for="n">Enter a positive integer:</label>
            <input type="number" id="n" name="n" min="0" required />
            <button type="submit">Calculate Factorial</button>
        </form>
        <div id="result"></div>

        <script>
            document
                .getElementById("factorialForm")
                .addEventListener("submit", function (event) {
                    event.preventDefault();
                    const input = document.getElementById("n").value;
                    const num = parseInt(input, 10);
                    if (isNaN(num) || num < 0) {
                        document.getElementById("result").innerHTML =
                            '<p style="color: red;">Please enter a valid positive integer.</p>';
                        return;
                    }
                    fetch("/factorial?n=" + encodeURIComponent(num), {
                        headers: {
                            "X-Requested-With": "XMLHttpRequest",
                        },
                    })
                        .then((response) => response.json())
                        .then((data) => {
                            if (data.error) {
                                document.getElementById("result").innerHTML =
                                    '<p style="color: red;">' +
                                    data.error +
                                    "</p>";
                            } else {
                                document.getElementById("result").innerHTML =
                                    "<p>Factorial of " +
                                    data.number +
                                    " is " +
                                    data.result +
                                    "</p>";
                            }
                        })
                        .catch((error) => {
                            document.getElementById("result").innerHTML =
                                '<p style="color: red;">Error calculating factorial.</p>';
                        });
                });
        </script>
    </body>
</html>
